# InsightFlow - 开源项目 MVP 功能文档 (v2.0)

## 0. 一句话介绍

- **这是什么？**
  一个以“RSS + PDF”为核心的智能阅读工作台。它不仅仅是阅读器，更是一个**“多文档研读环境”**。
- **解决谁的什么小问题？**
  解决知识工作者在阅读一篇高价值文章时，难以快速调用本地旧知识进行对比，且缺乏高效手段将**“当前阅读文章 + 关联的旧资料 + 随手笔记”**快速熔炼成一份结构化**“Takeaway（学习心得）”**的问题。

## 1. MVP 要做的核心价值

- **MVP 只验证一个点：**
  **“暂存区 (Staging Area) + AI 综述”** 的交互模式，能否让用户在不离开阅读流的情况下，完成对一个知识点的深度研究和笔记产出。
- **用户用完的“爽点/结果”是：**
  我看了一篇新文章，顺藤摸瓜看了 AI 推荐的 2 篇旧文，最后点一个按钮，系统自动把这 3 篇文章的精华结合我的笔记，生成了一份编号为 `#000001` 的**深度研读报告**。

## 2. 目标用户与使用场景

- **目标用户：**
  需要深度阅读并产出观点的**技术专家**、**行业分析师**、**研究生**。
- **核心场景（The "Deep Dive" Workflow）：**
  1.  **触发**：阅读一篇 RSS 推送的技术博客（文章 A），觉得很有深度，随手记了几条笔记。
  2.  **探索**：询问 AI：“这篇文章提到的观点，之前有类似的吗？” AI 推荐了库里的 PDF B 和 PDF C。
  3.  **暂存**：将文章 A 加入**左侧暂存区**。点击查看 PDF B，觉得也有用，也加入**暂存区**。
  4.  **产出**：点击暂存区的**“生成 Takeaway”**按钮。AI 结合 A+B+C 的内容及用户笔记，生成一份结构化的总结笔记。

## 3. 功能范围 (Scope)

- **必做（MVP 核心）：**
  - **F1 (Feed 与导入)**：RSS 订阅 + PDF 拖拽导入 + 自动 AI 打标签（分类）。
  - **F2 (主动 RAG)**：阅读时的 AI 侧边栏，支持检索库中关联文章，并提供**可点击跳转的引用链接**。
  - **F3 (暂存与研读)**：
    - **左侧暂存区**：一个类似“购物车”的区域，用于临时存放当前研究课题相关的多篇文章。
    - **Takeaway 生成器**：一键对暂存区所有文章 + 用户笔记进行熔炼，生成独立笔记。
- **暂不做（明确砍掉/延后）：**
  - **N1 (复杂导出)**：暂不开发对接 Notion/Obsidian API，笔记生成后仅保存在本地或支持“复制 Markdown”。
  - **N2 (多模态)**：不支持音视频。
  - **N3 (社交/分享)**：纯单机/个人工具。

## 4. 核心用户流程 (User Flow)

1.  **开始**：用户打开 RSS 列表，点击阅读文章《DeepSeek 架构解析》。
2.  **阅读与笔记**：用户在文中高亮关键段落，写下批注：“这里和 MoE 的路由机制不同”。
3.  **加入暂存**：用户觉得文章重要，点击“**Pin / 加入暂存**”，文章图标出现在**左侧栏下方**。
4.  **AI 检索**：用户在右侧 Chat 问：“库里有关于 MoE 路由机制的其他论文吗？”
5.  **扩展阅读**：AI 给出《Switch Transformer》的 PDF 链接。用户点击跳转，简单浏览后，也将该 PDF **加入暂存**。
6.  **收网**：用户点击左侧暂存区底部的 **“⚡ Generate Takeaway”** 按钮。
7.  **结果**：界面弹出一个新模态窗（或跳转到笔记页），显示编号 `#00001` 的笔记，内容包含：《DeepSeek》与《Switch》的对比分析、用户之前的批注、以及 AI 总结的核心结论。

## 5. 功能清单 (Feature Specs)

### 模块 A：数据源 (Input)
- **A1 混合订阅源**：支持 RSS Feed 和 自定义“Topic Feed”（用于存放手动导入的 PDF/网页）。
- **A2 智能元数据**：文章/PDF 入库时，自动提取 Title，并打上 1-3 个领域标签（如 `[LLM]`, `[System]`）。

### 模块 B：研读工作台 (The Workbench)
> **UI 布局变革**：左侧栏分为上下两部分（或 Tab 切换），上部是**导航/Feed**，下部是**暂存区 (Staging)**。

- **B1 暂存区 (Staging Area)**：
  - **交互**：在阅读任意文章时，导航栏/标题栏有一个显眼的 `+` 号或图钉图标，点击即“暂存”。
  - **展示**：左侧下方显示当前暂存的 2-3 篇文章标题小卡片。
  - **操作**：支持从暂存区移除文章；支持拖拽排序（影响总结的权重）。

- **B2 关联跳转 (Context Navigation)**：
  - 当 AI 在 Chat 中推荐文章链接时，点击链接**不覆盖**当前阅读页，而是建议“在新标签页打开”或“替换当前视图但保持暂存区不变”。

### 模块 C：智能产出 (The Synthesis)

- **C1 Takeaway 生成引擎**：
  - **输入**：`暂存区文章列表 (全文/摘要)` + `用户在这些文章下的所有 Highlight/Note`。
  - **Prompt 逻辑**：
    > "你是一名高级研究员。请阅读以下 [N] 篇文章和用户的 [M] 条笔记。请综合分析这些材料，生成一份深度研读报告。要求：1. 对比各文章观点的异同；2. 整合用户的笔记观点；3. 输出 3 个核心结论。"
  - **输出**：一篇新的、独立的 Markdown 笔记，自动分配 ID（如 `Note-20250102-01`）。

- **C2 本地笔记库**：
  
  - 系统内建一个简单的“笔记列表”页面，用于查看和回顾生成的 Takeaway。
  - 提供“复制为 Markdown”按钮。


## 6. Roadmap (MVP 阶段)

- **v0.1**：
  - 跑通 RSS/PDF 阅读。
  - 实现右侧 AI Chat (RAG)。
  - **核心**：实现左侧“暂存区”UI 及“多文合并总结”的 Prompt 逻辑。
- **v0.2**：
  - 增加笔记库列表页。
  - 优化生成的 Prompt 模板（支持用户微调总结风格）。



## X. 附录

### V3.0 prompt 

> 1. 我的想法是平衡。可以让AI对输出进行分类。比如1.以下文章来自您的知识库。2.以下来自网页搜索（取决于用户是否开启网页搜索功能）
> 2. 生命周期应该是和用户绑定，持久化的。但是我们可以提供选择按钮，可以清除掉一些未暂存的文章，对AI总结笔记也同理（也就是选中哪些，总结哪些，有删除功能）。至于你说的takeaway后，不需要立刻清空，由用户自主用全选按钮一键删除就可以了。
> 3. 这个TakeAway编号的本意是，用户将TakeAway记在了他的笔记软件，过几天他在阅读新文章，发现AI推荐了读过的文章且生成了笔记，就可以找到之前的笔记，然后再做修改（所以每篇文章，生成了笔记后，应该在文章的信息页有标记，用户也可以手动添加）。至于你说的AI生成结论旁边有锚点，是我没想到的功能，我认为可以加上去
> 4. mvp2.0版本有如下问题：
>    - 不应该设计UI相关的部分，比如`**UI 布局变革**：左侧栏分为上下两部分（或 Tab 切换），上部是**导航/Feed**，下部是**暂存区 (Staging)**。`
>    - 编号应是全局自增，而非AI生成，可以考虑用数据库记录？
>    - RoadMap可以再添加一些展望，你帮我想一想！应该是偏向用户体验方面的
